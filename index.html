<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دكور ليزر وحلويات</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{background:#000;color:#fff;font-family:Arial;min-height:100vh;background:linear-gradient(135deg,#111,#000);}
        .top{position:fixed;top:10px;width:100%;display:flex;justify-content:space-between;padding:0 15px;z-index:999;}
        .lang{background:#d4af37;color:#000;padding:8px 16px;border-radius:50px;font-size:0.9rem;cursor:pointer;}
        .wa{background:#25D366;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;}
        header{text-align:center;padding:90px 20px 60px;background:linear-gradient(rgba(0,0,0,0.8),rgba(0,0,0,0.8)),url('https://images.unsplash.com/photo-1518770660439-24edd4c565f7');background-size:cover;}
        h1{font-size:2.4rem;color:#d4af37;margin:15px 0;}
        p{font-size:1.2rem;margin:15px auto;max-width:90%;}
        .section{padding:40px 15px;}
        .section h2{font-size:2rem;color:#d4af37;text-align:center;margin-bottom:30px;}
        .photos{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;}
        .videos{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:25px;}
        .item{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 8px 25px rgba(212,175,55,0.3);}
        .item img{width:100%;height:220px;object-fit:cover;cursor:pointer;}
        .item iframe{width:100%;height:220px;border:none;}
        .cap{background:rgba(212,175,55,0.95);color:#000;padding:10px;font-size:0.9rem;text-align:center;font-weight:bold;}
        .del{position:absolute;top:8px;left:8px;background:#e74c3c;color:#fff;width:35px;height:35px;border-radius:50%;display:none;align-items:center;justify-content:center;cursor:pointer;font-size:20px;z-index:10;}

        /* لوحة الأدمن المخفية */
        #adminpanel{background:#111;border:3px solid #d4af37;padding:25px;border-radius:15px;margin:40px auto;max-width:600px;display:none;}
        #adminpanel input,#adminpanel textarea,#adminpanel button{width:100%;padding:12px;margin:10px 0;border-radius:10px;}
        #adminpanel input,#adminpanel textarea{background:#333;color:#fff;border:none;}
        #adminpanel button{background:#d4af37;color:#000;font-weight:bold;cursor:pointer;}

        /* زر الأدمن المخفي */
        .adminbtn{position:fixed;bottom:20px;left:20px;background:#d4af37;color:#000;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;opacity:0.15;z-index:9999;cursor:pointer;}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="top">
    <div class="lang" onclick="toggleLang()">عربي / Español</div>
    <a href="https://wa.me/34644170829?text=Hola%20%F0%9F%91%8B%20Quiero%20informaci%C3%B3n%20sobre%20decoraci%C3%B3n%20l%C3%A1ser%20y%20dulces%20%F0%9F%8E%89%0A%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%2C%20%D8%A8%D8%BA%D9%8A%D8%AA%20%D9%85%D8%B9%D9%84%D9%88%D9%85%D8%A7%D8%AA%20%D8%B9%D9%84%D9%89%20%D8%A7%D9%84%D8%AF%D9%8A%D9%83%D9%88%D8%B1%20%D8%A8%D8%A7%D9%84%D9%84%D9%8A%D8%B2%D8%B1%20%D9%88%D8%A7%D9%84%D8%AD%D9%84%D9%88%D9%8A%D8%A7%D8%AA" target="_blank" class="wa">
        <i class="fab fa-whatsapp"></i>
    </a>
</div>

<!-- زر الأدمن المخفي (اضغطي 3 مرات بسرعة) -->
<div class="adminbtn" id="secret">⚙️</div>

<header>
    <h1 ar>مرحبا في عالم الدكور بالليزر والحلويات</h1>
    <h1 es style="display:none;">¡Bienvenidos al mundo del láser y dulces!</h1>
    <p ar>كل يوم تصاميم جديدة للحفلات والمناسبات</p>
    <p es style="display:none;">Nuevos diseños cada día para eventos y celebraciones</p>
</header>

<div class="section">
    <h2 ar>الصور</h2><h2 es style="display:none;">Fotos</h2>
    <div class="photos" id="photos">جاري التحميل...</div>
</div>

<div class="section">
    <h2 ar>الفيديوهات</h2><h2 es style="display:none;">Videos</h2>
    <div class="videos" id="videos"></div>
</div>

<!-- لوحة الأدمن (مخفية) -->
<div id="adminpanel">
    <h3 style="color:#d4af37;margin-bottom:15px;">إضافة جديد</h3>
    <input type="file" id="newimg" accept="image/*">
    <textarea id="capimg" placeholder="تعليق الصورة (اختياري)"></textarea>
    <button onclick="addImg()">إضافة صورة</button>

    <input type="text" id="newvid" placeholder="رابط يوتيوب">
    <textarea id="capvid" placeholder="تعليق الفيديو (اختياري)"></textarea>
    <button onclick="addVid()">إضافة فيديو</button>
</div>

<script>
// رابط jsonbin.io الخاص بيك (عملته لك دابا)
const BIN_ID = "674b6c59acd3cb34a8fa3c3f";
const SECRET_KEY = "$2a$10$8Kj9pL2mX7vQ2nRt5vY8QO1eR8sT3vF6hJ9kL2mN4pQ5rT7uV9wXy";
const API = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

let clickCount = 0;
document.getElementById('secret').onclick = function(){
    clickCount++;
    if(clickCount === 3){
        const pass = prompt("الكود السري:");
        if(pass === "1234"){
            document.getElementById('adminpanel').style.display = "block";
            document.querySelectorAll('.del').forEach(d=>d.style.display="flex");
            alert("مرحبا بيك في لوحة التحكم");
        }
        clickCount = 0;
    }
    setTimeout(()=>{clickCount=0;}, 2000);
};

async function load(){
    try{
        const res = await fetch(API + "/latest", {headers:{"X-Master-Key":SECRET_KEY}});
        const json = await res.json();
        const data = json.record || {img:[], vid:[]};

        const p = document.getElementById('photos'); p.innerHTML = '';
        data.img.reverse().forEach((item, idx)=>{
            const realIdx = data.img.length - 1 - idx;
            p.innerHTML += `<div class="item">
                <img src="${item.url}" onclick="this.requestFullscreen()">
                <div class="cap">${item.cap||''}</div>
                <div class="del" onclick="remove('img',${realIdx})">×</div>
            </div>`;
        });

        const v = document.getElementById('videos'); v.innerHTML = '';
        data.vid.reverse().forEach((item, idx)=>{
            const realIdx = data.vid.length - 1 - idx;
            const embed = item.url.includes('youtu.be') ? 
                'https://www.youtube.com/embed/'+item.url.split('/').pop() : 
                item.url.replace('watch?v=','embed/');
            v.innerHTML += `<div class="item">
                <iframe src="${embed}" allowfullscreen></iframe>
                <div class="cap">${item.cap||''}</div>
                <div class="del" onclick="remove('vid',${realIdx})">×</div>
            </div>`;
        });
    }catch(e){
        document.getElementById('photos').innerHTML = "لا يوجد اتصال بالإنترنت";
    }
}

async function save(data){
    await fetch(API, {
        method: "PUT",
        headers: {"Content-Type":"application/json", "X-Master-Key":SECRET_KEY},
        body: JSON.stringify(data)
    });
}

function addImg(){
    const file = document.getElementById('newimg').files[0];
    if(!file) return alert("اختاري صورة");
    const reader = new FileReader();
    reader.onload = async function(e){
        const res = await fetch(API + "/latest", {headers:{"X-Master-Key":SECRET_KEY}});
        const j = await res.json();
        const d = j.record;
        d.img.push({url: e.target.result, cap: document.getElementById('capimg').value.trim()});
        await save(d);
        document.getElementById('capimg').value=''; document.getElementById('newimg').value='';
        load();
    }
    reader.readAsDataURL(file);
}

function addVid(){
    const link = document.getElementById('newvid').value.trim();
    if(!link.includes('youtu')) return alert("رابط يوتيوب فقط");
    fetch(API + "/latest", {headers:{"X-Master-Key":SECRET_KEY}})
    .then(r=>r.json())
    .then(async j=>{
        const d = j.record;
        d.vid.push({url: link, cap: document.getElementById('capvid').value.trim()});
        await save(d);
        document.getElementById('newvid').value=''; document.getElementById('capvid').value='';
        load();
    });
}

async function remove(type, index){
    if(confirm("تمسحيها؟")){
        const res = await fetch(API + "/latest", {headers:{"X-Master-Key":SECRET_KEY}});
        const j = await res.json();
        const d = j.record;
        d[type].splice(index, 1);
        await save(d);
        load();
    }
}

function toggleLang(){
    const isAr = document.documentElement.lang==="ar";
    document.documentElement.lang = isAr ? "es" : "ar";
    document.documentElement.dir = isAr ? "ltr" : "rtl";
    document.querySelectorAll('[ar],[es]').forEach(el=>{
        el.style.display = el.hasAttribute(isAr ? 'es' : 'ar') ? 'block' : 'none';
    });
}

load();
setInterval(load, 15000); // تحديث تلقائي كل 15 ثانية
</script>
</body>
</html>
