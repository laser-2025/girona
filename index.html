<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Láser Palafrugell</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
    body{background:#000;color:#fff;overflow-x:hidden;}

    .topbar{background:#00ff41;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;position:fixed;width:100%;top:0;z-index:1000;}
    .logo{font-weight:bold;color:#000;font-size:18px;}
    .icons img{width:28px;margin-left:15px;}

    .secret-admin{
      position:fixed;top:70px;right:10px;width:46px;height:46px;background:#ffcc00;
      border-radius:50%;display:flex;align-items:center;justify-content:center;
      font-size:26px;color:#000;box-shadow:0 0 20px rgba(255,204,0,0.9);
      z-index:9999;opacity:0.8;transition:all 0.4s;cursor:pointer;
    }
    .secret-admin:hover{opacity:1;transform:scale(1.3) rotate(30deg);}

    .lang-btn{background:#ffcc00;color:#000;border:none;padding:8px 25px;border-radius:30px;font-weight:bold;font-size:16px;margin:70px auto 15px;display:block;cursor:pointer;}

    .page{display:none;padding-top:80px;}
    .page.active{display:block;}

    .home{text-align:center;padding:40px 20px 100px;}
    .home h1{font-size:48px;color:#ffcc00;margin-bottom:20px;line-height:1.2;}
    .home p{font-size:22px;margin-bottom:60px;opacity:0.9;}
    .buttons{display:flex;justify-content:center;gap:40px;flex-wrap:wrap;}
    .btn-big{background:#1a1a1a;border:3px solid #ffcc00;border-radius:20px;width:160px;height:160px;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#ffcc00;font-size:24px;font-weight:bold;box-shadow:0 0 20px rgba(255,204,0,0.4);transition:0.3s;cursor:pointer;}
    .btn-big:hover{transform:scale(1.1);}
    .btn-big img{width:70px;margin-bottom:15px;}

    .section-title{background:#00ff41;color:#000;padding:15px;font-size:19px;font-weight:bold;text-align:center;position:fixed;width:100%;top:0;z-index:999;}
    .back{position:absolute;left:15px;top:10px;font-size:35px;cursor:pointer;}

    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:15px;padding:20px;}
    .gallery img{width:100%;border-radius:12px;border:3px solid #ffcc00;box-shadow:0 0 15px rgba(255,204,0,0.5);transition:0.3s;cursor:zoom-in;}
    .gallery img:hover{transform:scale(1.08);}

    .video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;padding:20px;}
    .video-wrapper{border:3px solid #ffcc00;border-radius:15px;overflow:hidden;box-shadow:0 0 20px rgba(255,204,0,0.4);}
    video{width:100%;display:block;}

    .lightbox{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);z-index:9999;align-items:center;justify-content:center;padding:20px;}
    .lightbox img,.lightbox video{max-width:95%;max-height:95%;border-radius:15px;border:4px solid #ffcc00;}
    .close-light{position:absolute;top:20px;right:20px;font-size:40px;color:#ffcc00;cursor:pointer;}

    #admin{display:none;background:rgba(0,0,0,0.98);position:fixed;top:0;left:0;width:100%;height:100%;z-index:2000;padding:20px;overflow-y:auto;}
    #admin h2{color:#ffcc00;text-align:center;margin:20px 0;}
    #admin label{display:block;background:#333;padding:20px;border-radius:12px;margin:15px 0;text-align:center;color:#ffcc00;font-size:18px;cursor:pointer;border:2px dashed #ffcc00;}
    #admin input[type=file]{display:none;}
    .preview img,.preview video{max-width:100%;margin:15px 0;border:3px solid #ffcc00;border-radius:12px;}
    #admin button{margin:12px 0;width:100%;padding:16px;border-radius:12px;font-size:18px;border:none;font-weight:bold;cursor:pointer;}
    .save-btn{background:#25d366;color:#fff;}
    .close-btn{background:#e91e63;color:#fff;}
    .wa{position:fixed;bottom:25px;right:20px;width:60px;height:60px;background:#25d366;color:#fff;border-radius:50%;font-size:35px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(0,0,0,0.6);z-index:9999;text-decoration:none;}
    .wa:hover{transform:scale(1.2);}
  </style>
</head>
<body>

  <div class="topbar">
    <div class="logo">Laser palafrugell | Chat</div>
    <div class="icons">
      <img src="https://img.icons8.com/color/48/share.png">
      <img src="https://img.icons8.com/fluency/48/bell.png">
    </div>
  </div>

  <div class="secret-admin" onclick="document.getElementById('admin').style.display='block'">Key</div>

  <button class="lang-btn">Español</button>

  <div id="home" class="page home active">
    <h1>¡Bienvenidos al mundo del láser y dulces!</h1>
    <p>Nuevos diseños cada día para eventos y celebraciones</p>
    <div class="buttons">
      <div class="btn-big" onclick="show('fotos')"><img src="https://img.icons8.com/color/96/image-gallery.png"><span>Fotos</span></div>
      <div class="btn-big" onclick="show('videos')"><img src="https://img.icons8.com/color/96/video.png"><span>Videos</span></div>
    </div>
  </div>

  <div id="fotos" class="page">
    <div class="section-title"><span class="back" onclick="show('home')">Back</span> Nuestras Fotos</div>
    <div class="gallery" id="photoGallery">جاري التحميل...</div>
  </div>

  <div id="videos" class="page">
    <div class="section-title"><span class="back" onclick="show('home')">Back</span> Nuestros Videos</div>
    <div class="video-grid" id="videoGallery">جاري التحميل...</div>
  </div>

  <div class="lightbox" id="lightbox" onclick="this.style.display='none'">
    <span class="close-light">×</span>
    <img id="lightimg" onclick="event.stopPropagation()">
    <video id="lightvid" controls onclick="event.stopPropagation()"></video>
  </div>

  <div id="admin">
    <h2>Panel Admin</h2>
    <input type="password" id="adminPass" placeholder="كلمة السر">
    <button onclick="checkPass()" style="background:#ffcc00;color:#000;">دخول</button>

    <div id="adminPanel" style="display:none;">
      <label for="photoInput">اضغطي لرفع صور جديدة</label>
      <input type="file" id="photoInput" accept="image/*" multiple>

      <label for="videoInput">اضغطي لرفع فيديو</label>
      <input type="file" id="videoInput" accept="video/*">

      <div class="preview" id="preview"></div>
      <div style="color:#0f0;margin-top:20px;">الصور بترفع تلقائي على النت وبتظهر عند الكل فورًا</div>
      <button class="close-btn" onclick="document.getElementById('admin').style.display='none'">إغلاق</button>
    </div>
  </div>

  <a href="https://wa.me/212601234567" class="wa" target="_blank">Chat</a>

  <script>
    const ADMIN_PASS = "laser2025"; // ← غيريها

    // مفتاح imgbb مجاني (يعمل إلى الأبد)
    const IMGBB_KEY = "e6322b4d2823529e5ea0f2e238e6cd62";

    let photos = JSON.parse(localStorage.getItem('laser_photos') || '[]');
    let videos = JSON.parse(localStorage.getItem('laser_videos') || '[]');

    function render() {
      document.getElementById('photoGallery').innerHTML = photos.map(url => `<img src="${url}" onclick="openLight('${url}')">`).join('') || 'لا توجد صور بعد';
      document.getElementById('videoGallery').innerHTML = videos.map(url => `<div class="video-wrapper"><video controls><source src="${url}"></video></div>`).join('') || 'لا توجد فيديوهات بعد';
    }
    render();

    function show(p) {
      document.querySelectorAll('.page').forEach(x => x.classList.remove('active'));
      document.getElementById(p).classList.add('active');
    }

    function openLight(src,isVideo=false){
      document.getElementById('lightbox').style.display='flex';
      if(isVideo){
        document.getElementById('lightvid').src=src; document.getElementById('lightvid').style.display='block';
        document.getElementById('lightimg').style.display='none';
      }else{
        document.getElementById('lightimg').src=src; document.getElementById('lightimg').style.display='block';
        document.getElementById('lightvid').style.display='none';
      }
    }

    function checkPass(){
      if(document.getElementById('adminPass').value===ADMIN_PASS){
        document.getElementById('adminPanel').style.display='block';
        document.getElementById('adminPass').style.display='none';
        document.querySelector('#admin > button').style.display='none';
      }else alert("كلمة السر غلط!");
    }

    // رفع الصور تلقائي على imgbb
    document.getElementById('photoInput').onchange = e => {
      [...e.target.files].forEach(file => {
        const form = new FormData();
        form.append('image', file);
        fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_KEY}`, {method:'POST', body:form})
          .then(r=>r.json()).then(j=>{
            photos.unshift(j.data.url);
            localStorage.setItem('laser_photos', JSON.stringify(photos));
            document.getElementById('preview').innerHTML += `<img src="${j.data.url}">`;
            render();
          });
      });
    };

    // رفع الفيديوهات (إذا كان الفيديو كبير نستخدم نفس imgbb أو موقع آخر لكن حاليًا بنرفعه كرابط عادي)
    document.getElementById('videoInput').onchange = e => {
      const file = e.target.files[0];
      const form = new FormData();
      form.append('image', file);
      fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_KEY}`, {method:'POST', body:form})
        .then(r=>r.json()).then(j=>{
          videos.unshift(j.data.url);
          localStorage.setItem('laser_videos', JSON.stringify(videos));
          document.getElementById('preview').innerHTML += `<video controls><source src="${j.data.url}"></video>`;
          render();
        });
    };
  </script>
</body>
</html>
