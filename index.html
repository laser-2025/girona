<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دكور ليزر وحلويات</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
        body{background:#000;color:#fff;font-family:Arial;min-height:100vh;background:linear-gradient(135deg,#111,#000);}
        .top-bar{position:fixed;top:0;left:0;right:0;height:65px;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.9);backdrop-filter:blur(12px);z-index:999;border-bottom:2px solid #d4af37;}
        .lang-btn{background:#d4af37;color:#000;padding:10px 25px;border-radius:50px;font-weight:bold;cursor:pointer;}
        .wa-btn{position:fixed;top:12px;left:15px;width:52px;height:52px;background:#25D366;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;z-index:1000;}
        .admin-icon{position:fixed;top:15px;right:15px;font-size:30px;opacity:0.3;cursor:pointer;z-index:1000;}

        header{text-align:center;padding:90px 20px 50px;background:linear-gradient(rgba(0,0,0,0.8),rgba(0,0,0,0.8)),url('https://images.unsplash.com/photo-1518770660439-24edd4c565f7');background-size:cover;background-position:center;}
        h1{font-size:2.4rem;color:#d4af37;margin:15px 0;}
        p{font-size:1.2rem;max-width:90%;margin:15px auto;}

        /* الملفين الصغيرين */
        .folders{display:flex;justify-content:center;gap:40px;margin:60px 0;flex-wrap:wrap;}
        .folder-btn{
            width:160px;height:160px;background:rgba(212,175,55,0.2);border:4px solid #d4af37;
            border-radius:30px;display:flex;flex-direction:column;align-items:center;justify-content:center;
            cursor:pointer;box-shadow:0 10px 30px rgba(212,175,55,0.4);transition:0.3s;
        }
        .folder-btn:active{transform:scale(0.95);}
        .folder-btn i{font-size:55px;margin-bottom:12px;color:#d4af37;}
        .folder-btn span{font-size:1.3rem;font-weight:bold;}

        /* الصفحة الكاملة */
        .fullpage{display:none;padding:20px 15px 100px;background:#000;}
        .fullpage.active{display:block;}
        .back-btn{
            position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
            background:#d4af37;color:#000;padding:16px 60px;border-radius:50px;
            font-weight:bold;font-size:1.1rem;z-index:998;cursor:pointer;
            box-shadow:0 5px 20px rgba(212,175,55,0.6);display:none;
        }

        .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;}
        .grid-vid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));}
        .item{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 8px 25px rgba(212,175,55,0.3);background:#000;cursor:pointer;}
        .item img,.item video,.item iframe{width:100%;height:220px;object-fit:cover;background:#000;}
        .item video{object-fit:contain;}
        .cap{background:rgba(212,175,55,0.95);color:#000;padding:12px;font-weight:bold;text-align:center;}
        .del{position:absolute;top:8px;left:8px;background:#e74c3c;color:#fff;width:38px;height:38px;border-radius:50%;display:none;align-items:center;justify-content:center;font-size:22px;cursor:pointer;z-index:10;}

        #adminpanel{background:#111;border:3px solid #d4af37;padding:25px;border-radius:20px;margin:40px 15px;display:none;z-index:998;}
        #adminpanel input,#adminpanel textarea,#adminpanel button{width:100%;padding:14px;margin:12px 0;border-radius:12px;}
        #adminpanel input,#adminpanel textarea{background:#333;color:#fff;border:none;}
        #adminpanel button{background:#d4af37;color:#000;font-weight:bold;}

        /* Lightbox مع زووم حر 100% */
        #lightbox{
            display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:9999;
            align-items:center;justify-content:center;overflow:hidden;cursor:zoom-in;
        }
        #lightbox.active{display:flex;}
        #lightbox img,#lightbox video{
            max-width:98%;max-height:98%;object-fit:contain;
            touch-action:pan-x pan-y pinch-zoom; /* زووم حر في الموبايل */
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="top-bar"><div class="lang-btn" id="langBtn">عربي / Español</div></div>
<a href="https://wa.me/34644170829" class="wa-btn"><i class="fab fa-whatsapp"></i></a>
<div class="admin-icon" id="adminIcon">⚙️</div>

<header>
    <h1 id="title">مرحبا في عالم الدكور بالليزر والحلويات</h1>
    <p id="desc">كل يوم تصاميم جديدة للحفلات والمناسبات</p>
</header>

<!-- الملفين الصغيرين -->
<div class="folders">
    <div class="folder-btn" onclick="openFolder('photos')">
        <i class="fas fa-images"></i>
        <span id="btnPhotos">الصور</span>
    </div>
    <div class="folder-btn" onclick="openFolder('videos')">
        <i class="fas fa-video"></i>
        <span id="btnVideos">الفيديوهات</span>
    </div>
</div>

<!-- صفحة الصور -->
<div id="photosPage" class="fullpage">
    <h2 style="text-align:center;color:#d4af37;margin:20px 0;font-size:2rem;">مجلد الصور</h2>
    <div class="grid" id="photos"></div>
</div>

<!-- صفحة الفيديوهات -->
<div id="videosPage" class="fullpage">
    <h2 style="text-align:center;color:#d4af37;margin:20px 0;font-size:2rem;">مجلد الفيديوهات</h2>
    <div class="grid-vid" id="videos"></div>
</div>

<div class="back-btn" onclick="backToHome()" id="backBtn">رجوع</div>

<!-- لوحة الأدمن -->
<div id="adminpanel">
    <h3 style="color:#d4af37;text-align:center;">إضافة صورة</h3>
    <input type="file" id="newimg" accept="image/*">
    <textarea id="capimg" placeholder="تعليق (اختياري)"></textarea>
    <button onclick="addImg()">إضافة للصور</button>

    <h3 style="color:#d4af37;text-align:center;margin-top:30px;">إضافة فيديو</h3>
    <input type="file" id="newvidfile" accept="video/*">
    <input type="text" id="newvidurl" placeholder="أو رابط (يوتيوب، تيك توك، فيسبوك...)">
    <textarea id="capvid" placeholder="تعليق (اختياري)"></textarea>
    <button onclick="addVideo()">إضافة للفيديوهات</button>
</div>

<!-- Lightbox مع زووم حر -->
<div id="lightbox" onclick="closeLightbox()"></div>

<script>
let isArabic = true;
const lightbox = document.getElementById('lightbox');
let pressTimer;

// فتح المجلدات
function openFolder(t){
    document.querySelectorAll('.fullpage').forEach(p=>p.classList.remove('active'));
    document.getElementById(t+'Page').classList.add('active');
    document.getElementById('backBtn').style.display = 'block';
    document.querySelector('.folders').style.display = 'none';
    document.querySelector('header').style.display = 'none';
}
function backToHome(){
    document.querySelectorAll('.fullpage').forEach(p=>p.classList.remove('active'));
    document.getElementById('backBtn').style.display = 'none';
    document.querySelector('.folders').style.display = 'flex';
    document.querySelector('header').style.display = 'block';
}

// الأدمن
document.getElementById('adminIcon').addEventListener('touchstart', e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('mousedown', e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('touchend',()=>clearTimeout(pressTimer));
document.getElementById('adminIcon').addEventListener('mouseup',()=>clearTimeout(pressTimer));
function openAdmin(){
    if(prompt("الكود السري:")==="1234"){
        document.getElementById('adminpanel').style.display="block";
        document.querySelectorAll('.del').forEach(d=>d.style.display="flex");
        alert("♥ مرحبا يا أحلى مديرة ♥");
    }
}

// Lightbox + زووم حر + زر الرجوع
function openLightbox(html){
    lightbox.innerHTML = html;
    lightbox.classList.add('active');
    history.pushState({lb:true},'');
}
function closeLightbox(){
    lightbox.classList.remove('active');
    lightbox.innerHTML = '';
    history.back();
}
window.onpopstate = () => lightbox.classList.contains('active') && closeLightbox();

// تحميل المحتوى
function load(){
    const data = JSON.parse(localStorage.getItem('laserWorks')||'{"img":[],"vid":[]}');
    const p = document.getElementById('photos'); p.innerHTML='';
    data.img.reverse().forEach((x,i)=>{let ri=data.img.length-1-i;
        p.innerHTML+=`<div class="item"><img src="${x.url}" onclick="openLightbox('<img src=\\\"${x.url}\\\" style=\\\"max-width:98%;max-height:98%\\\">')"><div class="cap">${x.cap||''}</div><div class="del" onclick="event.stopPropagation();delImg(${ri})">×</div></div>`;
    });

    const v = document.getElementById('videos'); v.innerHTML='';
    data.vid.reverse().forEach((x,i)=>{let ri=data.vid.length-1-i;
        if(x.type==='file'){
            v.innerHTML+=`<div class="item"><video src="${x.url}" controls playsinline></video><div class="cap">${x.cap||''}</div><div class="del" onclick="event.stopPropagation();delVid(${ri})">×</div></div>`;
            v.lastElementChild.querySelector('video').onclick = e => {e.stopPropagation(); openLightbox(`<video src="${x.url}" controls autoplay style="max-width:98%;max-height:98%"></video>`);};
        }else{
            const embed = x.embed || x.url;
            v.innerHTML+=`<div class="item"><iframe src="${embed}" allowfullscreen></iframe><div class="cap">${x.cap||''}</div><div class="del" onclick="event.stopPropagation();delVid(${ri})">×</div></div>`;
        }
    });
}

function save(d){localStorage.setItem('laserWorks',JSON.stringify(d));load();alert("تم ♥");}

function addImg(){
    const f=document.getElementById('newimg').files[0];
    if(!f) return alert("اختاري صورة");
    const r=new FileReader();
    r.onload=e=>{const d=JSON.parse(localStorage.getItem('laserWorks')||'{"img":[],"vid":[]}');d.img.push({url:e.target.result,cap:document.getElementById('capimg').value});save(d);document.getElementById('capimg').value='';document.getElementById('newimg').value='';};
    r.readAsDataURL(f);
}

function addVideo(){
    const file=document.getElementById('newvidfile').files[0];
    const url=document.getElementById('newvidurl').value.trim();
    const cap=document.getElementById('capvid').value;
    if(!file && !url) return alert("حطي فيديو أو رابط");
    const d=JSON.parse(localStorage.getItem('laserWorks')||'{"img":[],"vid":[]}');
    if(file){
        const r=new FileReader();r.onload=e=>{d.vid.push({type:'file',url:e.target.result,cap});save(d);};r.readAsDataURL(file);
    }else{
        let embed=url;
        if(url.includes('youtu')) embed=url.includes('youtu.be')?'https://www.youtube.com/embed/'+url.split('/').pop():url.replace('watch?v=','embed/');
        if(url.includes('tiktok.com')) embed=url.split('?')[0]+'/embed';
        d.vid.push({type:'url',url,embed,cap});save(d);
    }
    document.getElementById('newvidfile').value='';document.getElementById('newvidurl').value='';document.getElementById('capvid').value='';
}

function delImg(i){if(confirm("تمسحيها؟")){const d=JSON.parse(localStorage.getItem('laserWorks')||'{"img":[],"vid":[]}');d.img.splice(i,1);save(d);}}
function delVid(i){if(confirm("تمسحيها؟")){const d=JSON.parse(localStorage.getItem('laserWorks')||'{"img":[],"vid":[]}');d.vid.splice(i,1);save(d);}}

load();
</script>
</body>
</html>
